// Simplified Watson client that only calls backend
class WatsonXAssistant {
  private backendUrl: string;

  constructor() {
    // All AI calls go through Flask backend now
    this.backendUrl = import.meta.env.VITE_BACKEND_URL || 'http://localhost:5000';
    
    console.log('‚úÖ Watson client configured to use Flask backend:', this.backendUrl);
  }

  async sendMessage(message: string, language: string = 'en'): Promise<string> {
    try {
      console.log('ü§ñ Sending message to backend AI:', message.substring(0, 100) + '...');

      const response = await fetch(`${this.backendUrl}/api/ai/chat`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          message,
          language
        }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));
        console.error('‚ùå Backend AI error:', response.status, errorData);
        return this.getFallbackResponse(message, language);
      }

      const data = await response.json();
      
      if (data.error) {
        console.error('‚ùå Backend AI error:', data.error);
        return this.getFallbackResponse(message, language);
      }

      const aiResponse = data.response;
      
      if (!aiResponse) {
        console.warn('‚ö†Ô∏è No response from backend AI');
        return this.getFallbackResponse(message, language);
      }

      console.log('‚úÖ Backend AI response received');
      return aiResponse;
      
    } catch (error) {
      console.error('‚ùå Backend AI communication error:', error);
      return this.getFallbackResponse(message, language);
    }
  }

  async generateComplaintResponse(
    complaintText: string,
    category: string,
    priority: string,
    language: string = 'en'
  ): Promise<string> {
    try {
      console.log('üîç Generating complaint response via backend...');
      
      const response = await fetch(`${this.backendUrl}/api/ai/analyze`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          complaint: complaintText,
          language
        }),
      });

      if (!response.ok) {
        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));
        console.error('‚ùå Backend complaint analysis error:', response.status, errorData);
        return this.getCategorySpecificResponse(complaintText, category, priority, language);
      }

      const data = await response.json();
      
      if (data.error) {
        console.error('‚ùå Backend complaint analysis error:', data.error);
        return this.getCategorySpecificResponse(complaintText, category, priority, language);
      }

      const aiResponse = data.ai_response;
      
      if (!aiResponse) {
        console.warn('‚ö†Ô∏è No AI response from backend');
        return this.getCategorySpecificResponse(complaintText, category, priority, language);
      }

      console.log('‚úÖ Complaint response generated via backend');
      return aiResponse;
      
    } catch (error) {
      console.error('‚ùå Backend complaint analysis error:', error);
      return this.getCategorySpecificResponse(complaintText, category, priority, language);
    }
  }

  private getCategorySpecificResponse(
    complaintText: string,
    category: string,
    priority: string,
    language: string
  ): string {
    const responses: Record<string, Record<string, string[]>> = {
      'Infrastructure': {
        'en': [
          "Thank you for reporting this infrastructure issue. We've forwarded your complaint to the Public Works Department. Expected resolution time: 3-5 business days.",
          "Your infrastructure concern has been logged with high priority. Our engineering team will assess the situation and provide an update within 48 hours.",
          "We acknowledge your infrastructure complaint. The relevant authorities have been notified and will investigate this matter promptly."
        ],
        'hi': [
          "‡§á‡§∏ ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§¢‡§æ‡§Ç‡§ö‡•á ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§ ‡§π‡§Æ‡§®‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§≤‡•ã‡§ï ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§ï‡•ã ‡§≠‡•á‡§ú ‡§¶‡•Ä ‡§π‡•à‡•§ ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§∏‡§Æ‡§Ø: 3-5 ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§¶‡§ø‡§µ‡§∏‡•§",
          "‡§Ü‡§™‡§ï‡•Ä ‡§¨‡•Å‡§®‡§ø‡§Ø‡§æ‡§¶‡•Ä ‡§¢‡§æ‡§Ç‡§ö‡•á ‡§ï‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§â‡§ö‡•ç‡§ö ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§¶‡§∞‡•ç‡§ú ‡§ï‡•Ä ‡§ó‡§à ‡§π‡•à‡•§ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§á‡§Ç‡§ú‡•Ä‡§®‡§ø‡§Ø‡§∞‡§ø‡§Ç‡§ó ‡§ü‡•Ä‡§Æ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡§æ ‡§Ü‡§ï‡§≤‡§® ‡§ï‡§∞‡•á‡§ó‡•Ä‡•§"
        ]
      },
      'Utilities': {
        'en': [
          "Your utility service complaint has been received. The Water Supply Department will investigate and resolve this issue within 24-48 hours.",
          "Thank you for reporting this utility issue. Our technical team is aware and will address this matter urgently.",
          "We've logged your utility complaint. Emergency repairs will be prioritized if this affects essential services."
        ],
        'hi': [
          "‡§Ü‡§™‡§ï‡•Ä ‡§â‡§™‡§Ø‡•ã‡§ó‡§ø‡§§‡§æ ‡§∏‡•á‡§µ‡§æ ‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§à ‡§π‡•à‡•§ ‡§ú‡§≤ ‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø ‡§µ‡§ø‡§≠‡§æ‡§ó 24-48 ‡§ò‡§Ç‡§ü‡•ã‡§Ç ‡§ï‡•á ‡§≠‡•Ä‡§§‡§∞ ‡§á‡§∏ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§î‡§∞ ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§ï‡§∞‡•á‡§ó‡§æ‡•§"
        ]
      },
      'Traffic': {
        'en': [
          "Your traffic-related complaint has been forwarded to the Traffic Police Department. They will investigate and take appropriate action within 24 hours.",
          "Thank you for reporting this traffic issue. Our traffic management team will review and implement necessary measures.",
          "We've received your traffic complaint. Safety measures will be evaluated and implemented as needed."
        ]
      },
      'Environment': {
        'en': [
          "Your environmental concern has been logged with the Environment Department. An inspection will be conducted within 2-3 business days.",
          "Thank you for reporting this environmental issue. Our environmental team will assess and take corrective action.",
          "We acknowledge your environmental complaint. Pollution control measures will be reviewed and implemented."
        ]
      },
      'Healthcare': {
        'en': [
          "Your healthcare complaint has been forwarded to the Healthcare Department. A medical officer will review this matter within 24 hours.",
          "Thank you for bringing this healthcare issue to our attention. Quality assurance measures will be implemented.",
          "We've received your healthcare concern. Patient safety and service quality are our top priorities."
        ]
      },
      'Education': {
        'en': [
          "Your education-related complaint has been sent to the Education Department. An educational officer will investigate within 2-3 days.",
          "Thank you for reporting this educational issue. Academic standards and facilities will be reviewed.",
          "We acknowledge your education complaint. Student welfare and educational quality are paramount."
        ]
      }
    };

    const categoryResponses = responses[category] || responses['Infrastructure'];
    const languageResponses = categoryResponses[language] || categoryResponses['en'];
    const randomResponse = languageResponses[Math.floor(Math.random() * languageResponses.length)];

    // Add priority-based urgency
    if (priority === 'critical') {
      return `üö® URGENT: ${randomResponse} This has been marked as critical priority and will receive immediate attention.`;
    } else if (priority === 'high') {
      return `‚ö° HIGH PRIORITY: ${randomResponse} This will be expedited for faster resolution.`;
    }

    return randomResponse;
  }

  private getFallbackResponse(message: string, language: string): string {
    const responses: Record<string, string[]> = {
      'en': [
        "Thank you for contacting Samadhan AI. I understand your concern and have logged your complaint. Our team will review it and respond within 24-48 hours.",
        "I appreciate you bringing this matter to our attention. Your complaint has been received and will be assigned to the appropriate department for prompt action.",
        "Thank you for your message. I've recorded your concern and it will be processed according to our standard procedures. You can expect an update soon.",
        "Your complaint has been successfully logged in our system. Our dedicated team will investigate this matter and provide you with a resolution timeline shortly.",
        "I acknowledge your concern and have forwarded it to the relevant authorities. We take all citizen complaints seriously and will ensure proper action is taken.",
      ],
      'hi': [
        "‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® AI ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§∏‡§Æ‡§ù‡§§‡§æ ‡§π‡•Ç‡§Ç ‡§î‡§∞ ‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞ ‡§≤‡•Ä ‡§π‡•à‡•§ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§ü‡•Ä‡§Æ ‡§á‡§∏‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§ó‡•Ä ‡§î‡§∞ 24-48 ‡§ò‡§Ç‡§ü‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§ó‡•Ä‡•§",
        "‡§á‡§∏ ‡§Æ‡§æ‡§Æ‡§≤‡•á ‡§ï‡•ã ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§Æ‡•á‡§Ç ‡§≤‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§ ‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ï‡§æ‡§∞‡•ç‡§∞‡§µ‡§æ‡§à ‡§ï‡•á ‡§≤‡§ø‡§è ‡§â‡§™‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§µ‡§ø‡§≠‡§æ‡§ó ‡§ï‡•ã ‡§∏‡•å‡§Ç‡§™‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§",
        "‡§Ü‡§™‡§ï‡•á ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§ ‡§Æ‡•à‡§Ç‡§®‡•á ‡§Ü‡§™‡§ï‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞ ‡§≤‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§á‡§∏‡•á ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§Æ‡§æ‡§®‡§ï ‡§™‡•ç‡§∞‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∏‡§Ç‡§∏‡§æ‡§ß‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§",
      ],
      'bn': [
        "‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® AI-‡¶è‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§ ‡¶Ü‡¶Æ‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶â‡¶¶‡ßç‡¶¨‡ßá‡¶ó ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶õ‡¶ø ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶≤‡¶ó ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡•§ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¶‡¶≤ ‡¶è‡¶ü‡¶ø ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ï‡¶∞‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡ß®‡ß™-‡ß™‡ßÆ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡ßá‡¶¨‡ßá‡•§",
        "‡¶è‡¶á ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶ü‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡¶ú‡¶∞‡ßá ‡¶Ü‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶‡•§ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡¶≠‡¶ø‡¶Ø‡ßã‡¶ó ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶ó‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶™‡¶¶‡¶ï‡ßç‡¶∑‡ßá‡¶™‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶â‡¶™‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§",
      ],
      'ta': [
        "‡Æö‡ÆÆ‡Ææ‡Æ§‡Ææ‡Æ©‡Øç AI-‡Æê ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Æ§‡Æ±‡Øç‡Æï‡ØÅ ‡Æ®‡Æ©‡Øç‡Æ±‡Æø‡•§ ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡Æµ‡Æ≤‡Øà‡ÆØ‡Øà ‡Æ®‡Ææ‡Æ©‡Øç ‡Æ™‡ØÅ‡Æ∞‡Æø‡Æ®‡Øç‡Æ§‡ØÅ‡Æï‡Øä‡Æ≥‡Øç‡Æï‡Æø‡Æ±‡Øá‡Æ©‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ØÅ‡Æï‡Ææ‡Æ∞‡Øà ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ‡Æ≥‡Øç‡Æ≥‡Øá‡Æ©‡Øç. ‡Æé‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æï‡ØÅ‡Æ¥‡ØÅ ‡Æá‡Æ§‡Øà ‡ÆÆ‡Æ§‡Æø‡Æ™‡Øç‡Æ™‡Ææ‡ÆØ‡Øç‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡Æ§‡ØÅ 24-48 ‡ÆÆ‡Æ£‡Æø ‡Æ®‡Øá‡Æ∞‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Øç ‡Æ™‡Æ§‡Æø‡Æ≤‡Æ≥‡Æø‡Æï‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç‡•§",
      ],
      'te': [
        "‡∞∏‡∞Æ‡∞æ‡∞ß‡∞æ‡∞®‡±ç AI ‡∞®‡∞ø ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞Ç‡∞ö‡∞ø‡∞®‡∞Ç‡∞¶‡±Å‡∞ï‡±Å ‡∞ß‡∞®‡±ç‡∞Ø‡∞µ‡∞æ‡∞¶‡∞æ‡∞≤‡±Å. ‡∞Æ‡±Ä ‡∞Ü‡∞Ç‡∞¶‡±ã‡∞≥‡∞®‡∞®‡±Å ‡∞®‡±á‡∞®‡±Å ‡∞Ö‡∞∞‡±ç‡∞•‡∞Ç ‡∞ö‡±á‡∞∏‡±Å‡∞ï‡±Å‡∞®‡±ç‡∞®‡∞æ‡∞®‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡±Ä ‡∞´‡∞ø‡∞∞‡±ç‡∞Ø‡∞æ‡∞¶‡±Å‡∞®‡±Å ‡∞≤‡∞æ‡∞ó‡±ç ‡∞ö‡±á‡∞∏‡∞æ‡∞®‡±Å. ‡∞Æ‡∞æ ‡∞¨‡±É‡∞Ç‡∞¶‡∞Ç ‡∞¶‡±Ä‡∞®‡∞ø‡∞®‡∞ø ‡∞∏‡∞Æ‡±Ä‡∞ï‡±ç‡∞∑‡∞ø‡∞Ç‡∞ö‡∞ø 24-48 ‡∞ó‡∞Ç‡∞ü‡∞≤‡±ç‡∞≤‡±ã ‡∞™‡±ç‡∞∞‡∞§‡∞ø‡∞∏‡±ç‡∞™‡∞Ç‡∞¶‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø‡•§",
      ],
      'mr': [
        "‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® AI ‡§∂‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§∏‡§æ‡§ß‡§≤‡•ç‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶. ‡§Æ‡§≤‡§æ ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§ö‡§ø‡§Ç‡§§‡§æ ‡§∏‡§Æ‡§ú‡§≤‡•Ä ‡§Ü‡§π‡•á ‡§Ü‡§£‡§ø ‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§§‡§ï‡•ç‡§∞‡§æ‡§∞ ‡§®‡•ã‡§Ç‡§¶‡§µ‡§≤‡•Ä ‡§Ü‡§π‡•á. ‡§Ü‡§Æ‡§ö‡•Ä ‡§ü‡•Ä‡§Æ ‡§Ø‡§æ‡§ö‡•á ‡§™‡•Å‡§®‡§∞‡§æ‡§µ‡§≤‡•ã‡§ï‡§® ‡§ï‡§∞‡•á‡§≤ ‡§Ü‡§£‡§ø 24-48 ‡§§‡§æ‡§∏‡§æ‡§Ç‡§§ ‡§™‡•ç‡§∞‡§§‡§ø‡§∏‡§æ‡§¶ ‡§¶‡•á‡§à‡§≤.",
      ],
    };

    const langCode = language.split('-')[0];
    const langResponses = responses[langCode] || responses['en'];
    return langResponses[Math.floor(Math.random() * langResponses.length)];
  }

  // Method to check backend health
  async checkServiceHealth(): Promise<boolean> {
    try {
      console.log('üîç Checking backend health...');
      
      const response = await fetch(`${this.backendUrl}/health`);
      
      if (!response.ok) {
        console.error('‚ùå Backend health check failed:', response.status);
        return false;
      }

      const healthData = await response.json();
      console.log('üìä Backend health check:', healthData);
      
      return healthData.status === 'healthy';
    } catch (error) {
      console.error('‚ùå Backend health check error:', error);
      return false;
    }
  }

  // Test backend connection
  async testConnection(): Promise<boolean> {
    try {
      console.log('üîç Testing backend connection...');
      
      const response = await fetch(`${this.backendUrl}/api/watsonx/test`);
      
      if (!response.ok) {
        console.error('‚ùå Backend test failed:', response.status);
        return false;
      }

      const testData = await response.json();
      
      if (testData.error) {
        console.error('‚ùå Backend test error:', testData.error);
        return false;
      }

      console.log('‚úÖ Backend test successful:', testData);
      return testData.success !== false;
    } catch (error) {
      console.error('‚ùå Backend test error:', error);
      return false;
    }
  }

  // Get deployment info
  async getDeploymentInfo(): Promise<any> {
    try {
      const response = await fetch(`${this.backendUrl}/health`);
      
      if (!response.ok) {
        return null;
      }

      const healthData = await response.json();
      
      return {
        metadata: {
          id: 'backend-ai',
          name: 'Centralized AI Backend',
          status: 'active',
          region: 'local',
          model: 'watson-x + openrouter-deepseek'
        },
        model: 'hybrid-ai',
        capabilities: ['text-generation', 'conversation', 'sentiment-analysis', 'complaint-analysis'],
        endpoint: this.backendUrl,
        version: '1.0.0',
        backend: this.backendUrl
      };
    } catch (error) {
      console.error('‚ùå Error getting deployment info:', error);
      return null;
    }
  }
}

export const watsonAssistant = new WatsonXAssistant();